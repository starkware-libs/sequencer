{"version":3,"file":"extract-snippets.js","sourceRoot":"","sources":["../../src/markdown/extract-snippets.ts"],"names":[],"mappings":";;AASA,sFAmBC;AA5BD,iCAAiC;AAEjC,iFAA4E;AAE5E,mDAA2D;AAK3D,SAAgB,qCAAqC,CACnD,QAAgB,EAChB,QAAqB,EACrB,MAAe;IAEf,MAAM,MAAM,GAAG,IAAI,EAAE,CAAC,MAAM,EAAE,CAAC;IAC/B,MAAM,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;IAEnC,MAAM,GAAG,GAAwB,EAAE,CAAC;IAEpC,IAAA,8BAAmB,EACjB,GAAG,EACH,IAAI,yDAA0B,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE;QACtD,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACb,OAAO,SAAS,CAAC;IACnB,CAAC,CAAC,CACH,CAAC;IAEF,OAAO,GAAG,CAAC;AACb,CAAC","sourcesContent":["import * as cm from 'commonmark';\n\nimport { ReplaceTypeScriptTransform } from './replace-typescript-transform';\nimport { CodeBlock } from './types';\nimport { visitCommonMarkTree } from '../markdown/markdown';\nimport { TypeScriptSnippet, ApiLocation } from '../snippet';\n\nexport type TypeScriptReplacer = (code: TypeScriptSnippet) => CodeBlock | undefined;\n\nexport function extractTypescriptSnippetsFromMarkdown(\n  markdown: string,\n  location: ApiLocation,\n  strict: boolean,\n): TypeScriptSnippet[] {\n  const parser = new cm.Parser();\n  const doc = parser.parse(markdown);\n\n  const ret: TypeScriptSnippet[] = [];\n\n  visitCommonMarkTree(\n    doc,\n    new ReplaceTypeScriptTransform(location, strict, (ts) => {\n      ret.push(ts);\n      return undefined;\n    }),\n  );\n\n  return ret;\n}\n"]}