"use strict";
/**
 *
 *              github:crossplane/crossplane@0.14.0
 *              |--^- |  ^         ^         ^ ^  ^
 *                 |     |         |         | |  |
 *  - provider ----+     |         |         | |  |
 *  - account -----------+         |         | |  |
 *  - repo ------------------------+         | |  |
 *  - major ---------------------------------+ |  |
 *  - minor -----------------------------------+  |
 *  - patch --------------------------------------+
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchCrdsDevUrl = void 0;
/**
 * Matches a https://doc.crds.dev repo
 *
 *  - url if found
 *  - undefined if not
 *
 * @param source
 */
function matchCrdsDevUrl(source) {
    const match = /^github:([A-Za-z0-9_.-]+)\/([A-Za-z0-9_.-]+)(?:\@([0-9]+)\.([0-9]+)(?:\.([0-9]+))?)?$/.exec(source);
    if (match) {
        const account = match[1];
        const repo = match[2];
        const major = match[3];
        //default to master if no version specified
        //TODO: get latest released version from available versions
        let url = `https://doc.crds.dev/raw/github.com/${account}/${repo}`;
        if (major) {
            const minor = match[4];
            const patch = match[5] ?? '0';
            url = `https://doc.crds.dev/raw/github.com/${account}/${repo}@v${major}.${minor}.${patch}`;
        }
        return url;
    }
    return undefined;
}
exports.matchCrdsDevUrl = matchCrdsDevUrl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3Jkcy1kZXYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW1wb3J0L2NyZHMtZGV2LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRzs7O0FBRUg7Ozs7Ozs7R0FPRztBQUNILFNBQWdCLGVBQWUsQ0FBQyxNQUFjO0lBQzVDLE1BQU0sS0FBSyxHQUFHLHVGQUF1RixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuSCxJQUFJLEtBQUssRUFBRTtRQUNULE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZCLDJDQUEyQztRQUMzQywyREFBMkQ7UUFDM0QsSUFBSSxHQUFHLEdBQUcsdUNBQXVDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNuRSxJQUFJLEtBQUssRUFBRTtZQUNULE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN2QixNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDO1lBRTlCLEdBQUcsR0FBRyx1Q0FBdUMsT0FBTyxJQUFJLElBQUksS0FBSyxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssRUFBRSxDQUFDO1NBQzVGO1FBRUQsT0FBTyxHQUFHLENBQUM7S0FDWjtJQUVELE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUM7QUFyQkQsMENBcUJDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICogICAgICAgICAgICAgIGdpdGh1Yjpjcm9zc3BsYW5lL2Nyb3NzcGxhbmVAMC4xNC4wXG4gKiAgICAgICAgICAgICAgfC0tXi0gfCAgXiAgICAgICAgIF4gICAgICAgICBeIF4gIF5cbiAqICAgICAgICAgICAgICAgICB8ICAgICB8ICAgICAgICAgfCAgICAgICAgIHwgfCAgfFxuICogIC0gcHJvdmlkZXIgLS0tLSsgICAgIHwgICAgICAgICB8ICAgICAgICAgfCB8ICB8XG4gKiAgLSBhY2NvdW50IC0tLS0tLS0tLS0tKyAgICAgICAgIHwgICAgICAgICB8IHwgIHxcbiAqICAtIHJlcG8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgIHwgfCAgfFxuICogIC0gbWFqb3IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyB8ICB8XG4gKiAgLSBtaW5vciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHxcbiAqICAtIHBhdGNoIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICovXG5cbi8qKlxuICogTWF0Y2hlcyBhIGh0dHBzOi8vZG9jLmNyZHMuZGV2IHJlcG9cbiAqXG4gKiAgLSB1cmwgaWYgZm91bmRcbiAqICAtIHVuZGVmaW5lZCBpZiBub3RcbiAqXG4gKiBAcGFyYW0gc291cmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaENyZHNEZXZVcmwoc291cmNlOiBzdHJpbmcpOiAodW5kZWZpbmVkIHwgc3RyaW5nKSB7XG4gIGNvbnN0IG1hdGNoID0gL15naXRodWI6KFtBLVphLXowLTlfLi1dKylcXC8oW0EtWmEtejAtOV8uLV0rKSg/OlxcQChbMC05XSspXFwuKFswLTldKykoPzpcXC4oWzAtOV0rKSk/KT8kLy5leGVjKHNvdXJjZSk7XG4gIGlmIChtYXRjaCkge1xuICAgIGNvbnN0IGFjY291bnQgPSBtYXRjaFsxXTtcbiAgICBjb25zdCByZXBvID0gbWF0Y2hbMl07XG4gICAgY29uc3QgbWFqb3IgPSBtYXRjaFszXTtcblxuICAgIC8vZGVmYXVsdCB0byBtYXN0ZXIgaWYgbm8gdmVyc2lvbiBzcGVjaWZpZWRcbiAgICAvL1RPRE86IGdldCBsYXRlc3QgcmVsZWFzZWQgdmVyc2lvbiBmcm9tIGF2YWlsYWJsZSB2ZXJzaW9uc1xuICAgIGxldCB1cmwgPSBgaHR0cHM6Ly9kb2MuY3Jkcy5kZXYvcmF3L2dpdGh1Yi5jb20vJHthY2NvdW50fS8ke3JlcG99YDtcbiAgICBpZiAobWFqb3IpIHtcbiAgICAgIGNvbnN0IG1pbm9yID0gbWF0Y2hbNF07XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzVdID8/ICcwJztcblxuICAgICAgdXJsID0gYGh0dHBzOi8vZG9jLmNyZHMuZGV2L3Jhdy9naXRodWIuY29tLyR7YWNjb3VudH0vJHtyZXBvfUB2JHttYWpvcn0uJHttaW5vcn0uJHtwYXRjaH1gO1xuICAgIH1cblxuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIl19