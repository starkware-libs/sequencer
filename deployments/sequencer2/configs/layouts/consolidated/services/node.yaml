# Sequencer Node Configuration
# For detailed configuration options, see docs/ directory

name: node

replicas: 1

# Config Configuration
# configPaths: List of paths to Sequencer JSON config files (required)
# mountPath: Path where the config will be mounted in the container (optional, default: "/config/sequencer/presets/")
config:
  configPaths:
    - crates/apollo_deployments/resources/app_configs/base_layer_config.json
    - crates/apollo_deployments/resources/app_configs/batcher_config.json
    - crates/apollo_deployments/resources/app_configs/class_manager_config.json
    - crates/apollo_deployments/resources/app_configs/config_manager_config.json
    - crates/apollo_deployments/resources/app_configs/consensus_manager_config.json
    - crates/apollo_deployments/resources/app_configs/revert_config.json
    - crates/apollo_deployments/resources/app_configs/versioned_constants_overrides_config.json
    - crates/apollo_deployments/resources/app_configs/validate_resource_bounds_config.json
    - crates/apollo_deployments/resources/app_configs/gateway_config.json
    - crates/apollo_deployments/resources/app_configs/http_server_config.json
    - crates/apollo_deployments/resources/app_configs/l1_endpoint_monitor_config.json
    - crates/apollo_deployments/resources/app_configs/l1_gas_price_provider_config.json
    - crates/apollo_deployments/resources/app_configs/l1_gas_price_scraper_config.json
    - crates/apollo_deployments/resources/app_configs/l1_provider_config.json
    - crates/apollo_deployments/resources/app_configs/l1_scraper_config.json
    - crates/apollo_deployments/resources/app_configs/mempool_config.json
    - crates/apollo_deployments/resources/app_configs/mempool_p2p_config.json
    - crates/apollo_deployments/resources/app_configs/monitoring_endpoint_config.json
    - crates/apollo_deployments/resources/app_configs/sierra_compiler_config.json
    - crates/apollo_deployments/resources/app_configs/state_sync_config.json
    - crates/apollo_deployments/resources/deployments/testing/deployment_config_override.json
    - crates/apollo_deployments/resources/deployments/testing/consolidated.json
    - crates/apollo_deployments/resources/services/consolidated/node.json
  # mountPath: /config/sequencer/presets/  # Optional: Override default mount path

# StatefulSet Configuration
# See docs/STATEFULSET_CONFIGURATION.md for all available options
statefulSet:
  enabled: true
  annotations: {}
  labels: {}
  podManagementPolicy: OrderedReady
  updateStrategy:
    type: RollingUpdate

# RBAC Configuration
# See docs/RBAC_CONFIGURATION.md for all available options
rbac:
  enabled: false
  type: Role # "Role" for namespaced, "ClusterRole" for cluster-scoped
  roleName: ""
  roleBindingName: ""
  annotations: {}
  labels: {}
  rules: []
  subjects: []
  roleRef: null

# Container Command
# Override the default container command (optional)
# If not specified, uses the image's default ENTRYPOINT/CMD
command: []
#   - /bin/sh
#   - -c
#   - "your-command-here"

# Container Args
# Override the default container arguments (optional)
# If not specified, uses the image's default CMD args
args: []

# ServiceAccount Configuration
# See docs/SERVICE_ACCOUNT_CONFIGURATION.md for all available options
serviceAccount:
  enabled: true
  name: ""
  annotations: {}
  labels: {}
  automountServiceAccountToken: true
  imagePullSecrets: []
  secrets: []

# Pod termination grace period
terminationGracePeriodSeconds: 300

# Service Configuration
# See docs/SERVICE_CONFIGURATION.md for all available options
service:
  type: ClusterIP
  ports:
    - name: http
      port: 80
      targetPort: 8080
      protocol: TCP
    - name: monitoring
      port: 9090
      targetPort: 9090
      protocol: TCP
  annotations: {}
  labels: {}

# Ingress Configuration
# See docs/INGRESS_CONFIGURATION.md for all available options
ingress:
  enabled: true
  ingressClassName: "nginx"
  annotations: {}
  hosts:
    - sequencer.example.com
  tls: []

# HPA Configuration
# See docs/HPA_FLEXIBILITY_GUIDE.md for all available options
hpa:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# PodDisruptionBudget Configuration
# See docs/POD_DISRUPTION_BUDGET_CONFIGURATION.md for all available options
podDisruptionBudget:
  enabled: true
  name: ""
  annotations: {}
  labels: {}
  selector:
    matchLabels: {}
    matchExpressions: []
  minAvailable: null # Use minAvailable OR maxUnavailable (not both)
  maxUnavailable: "50%" # Use maxUnavailable OR minAvailable (not both)
  unhealthyPodEvictionPolicy: "IfHealthyBudget" # IfHealthyBudget, AlwaysAllow

# NetworkPolicy Configuration
# See docs/NETWORK_POLICY_CONFIGURATION.md for all available options
networkPolicy:
  enabled: false
  name: ""
  annotations: {}
  labels: {}
  podSelector:
    matchLabels: {}
    matchExpressions: []
  policyTypes: []
  ingress: []
  egress: []

# PriorityClass Configuration
# See docs/PRIORITY_CLASS_CONFIGURATION.md for all available options
priorityClass:
  enabled: false
  name: ""
  annotations: {}
  labels: {}
  value: 1000
  globalDefault: false
  description: ""
  preemptionPolicy: ""

# GCP PodMonitoring Configuration
# See docs/GCP_POD_MONITORING_CONFIGURATION.md for all available options
gcpPodMonitoring:
  enabled: true
  name: ""
  annotations: {}
  labels: {}
  spec:
    selector:
      matchLabels: {}
      matchExpressions: []
    endpoints:
      - port: 9090
        path: "/monitoring/metrics"
        interval: "10s"
        timeout: "5s"
        scheme: "http"
    filterRunning: true
    limits:
      samples: 0
      labels: 0
      labelNameLength: 0
      labelValueLength: 0
    targetLabels:
      metadata: ["pod", "container"]
      fromPod: []

# Secret Configuration
# See docs/SECRET_CONFIGURATION.md for all available options
secret:
  enabled: true
  name: "sequencer-secrets"
  type: Opaque
  data: {}
  stringData:
    TEST_KEY: "test-value"
  annotations: {}
  labels: {}
  immutable: false
  # mountPath: /etc/secrets  # Optional: Override default mount path (default: "/etc/secrets")

# ExternalSecret Configuration
# See docs/EXTERNAL_SECRET_CONFIGURATION.md for all available options
externalSecret:
  enabled: true
  secretStore:
    name: external-secrets-project
    kind: ClusterSecretStore
  data:
    - secretKey: ext_key
      remoteKey: test/remote
  targetName: "sequencer-external"
  # mountPath: /etc/secrets  # Optional: Override default mount path (default: "/etc/secrets")
  template: {}
  metadata: {}
  deletionPolicy: Retain

# Volume Configuration
# See docs/VOLUME_CONFIGURATION.md for all available options
persistentVolume:
  enabled: true
  size: 10Gi
  mountPath: /data
  storageClass: "premiun-rwo"
  accessModes:
    - ReadWriteOnce
  annotations: {}
  labels: {}
  volumeMode: Filesystem
  existingClaim: ""

# GCP BackendConfig Configuration
# See docs/GCP_BACKEND_CONFIG_CONFIGURATION.md for all available options
gcpBackendConfig:
  enabled: false
  customRequestHeaders: []
  connectionDrainingTimeoutSeconds: 0
  securityPolicy: ""
  timeOutSeconds: 0
  healthCheck:
    checkIntervalSeconds: 0
    timeoutSeconds: 0
    healthyThreshold: 0
    unhealthyThreshold: 0
    requestPath: ""
    port: 0

# Pod Annotations
podAnnotations: {}

# Pod Labels
podLabels: {}

# ConfigMap Annotations
configMapAnnotations: {}

# Deployment Annotations
deploymentAnnotations: {}

# Environment Variables
# Each environment variable requires 'name' and 'value' fields
env:
  - name: RUST_LOG
    value: "debug"
  - name: RUST_BACKTRACE
    value: "full"
  - name: NO_COLOR
    value: "1"

# Node Selection
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Pod Anti-Affinity
podAntiAffinity: {}

# Topology Spread Constraints
topologySpreadConstraints: []

# Security Context
securityContext: {}

# Resources
resources: {}

# Update Strategy
updateStrategy:
  type: RollingUpdate
